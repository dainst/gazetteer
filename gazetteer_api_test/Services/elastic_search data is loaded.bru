meta {
  name: elastic_search data is loaded
  type: http
  seq: 2
}

get {
  url: http://localhost:9200/gazetteer/_search
  body: json
  auth: inherit
}

body:json {
  {
    "query": {
      "bool": {
        "must": [
          {
            "query_string": {
              "query": "(rotes meer)",
              "default_field": "all",
              "fields": [],
              "type": "best_fields",
              "default_operator": "and",
              "max_determinized_states": 10000,
              "enable_position_increments": true,
              "fuzziness": "AUTO",
              "fuzzy_prefix_length": 0,
              "fuzzy_max_expansions": 50,
              "phrase_slop": 0,
              "escape": false,
              "auto_generate_synonyms_phrase_query": true,
              "fuzzy_transpositions": true,
              "boost": 1.0
            }
          }
        ],
        "filter": [
          {
            "query_string": {
              "query": "recordGroupId:(none)",
              "fields": [],
              "type": "best_fields",
              "default_operator": "or",
              "max_determinized_states": 10000,
              "enable_position_increments": true,
              "fuzziness": "AUTO",
              "fuzzy_prefix_length": 0,
              "fuzzy_max_expansions": 50,
              "phrase_slop": 0,
              "escape": false,
              "auto_generate_synonyms_phrase_query": true,
              "fuzzy_transpositions": true,
              "boost": 1.0
            }
          },
          {
            "query_string": {
              "query": "deleted:false",
              "fields": [],
              "type": "best_fields",
              "default_operator": "or",
              "max_determinized_states": 10000,
              "enable_position_increments": true,
              "fuzziness": "AUTO",
              "fuzzy_prefix_length": 0,
              "fuzzy_max_expansions": 50,
              "phrase_slop": 0,
              "escape": false,
              "auto_generate_synonyms_phrase_query": true,
              "fuzzy_transpositions": true,
              "boost": 1.0
            }
          },
          {
            "query_string": {
              "query": "needsReview:false",
              "fields": [],
              "type": "best_fields",
              "default_operator": "or",
              "max_determinized_states": 10000,
              "enable_position_increments": true,
              "fuzziness": "AUTO",
              "fuzzy_prefix_length": 0,
              "fuzzy_max_expansions": 50,
              "phrase_slop": 0,
              "escape": false,
              "auto_generate_synonyms_phrase_query": true,
              "fuzzy_transpositions": true,
              "boost": 1.0
            }
          }
        ],
        "adjust_pure_negative": true,
        "boost": 1.0
      }
    }
  }
  
}

assert {
  res.body.hits.total.value: eq 3
}

settings {
  encodeUrl: true
  timeout: 0
}
